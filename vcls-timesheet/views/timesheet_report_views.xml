<odoo>
    <data>

        <record id="timesheet_lm_report_pivot" model="ir.ui.view">
            <field name="name">timesheet.lm.report.pivot</field>
            <field name="model">timesheet.report</field>
            <field name="arch" type="xml">
                <pivot string="Line Manager Report">
                    <field name="employee_id" type="row"/>
                    <field name = "project_id" type="row" />
                    <field name = "deliverable_id" type="row" />
                    <field name = "task_id" type="row" />
                    <field name = "date" type = "col" />
                    <field name="unit_amount" type="measure"/>
                </pivot>
            </field>
        </record>

        <record id="action_lm_all_timesheet_pivot" model="ir.actions.act_window">
            <field name="name">Line Manager Report</field>
            <field name="res_model">timesheet.report</field>
            <field name="view_mode">pivot</field>
            <field name='view_id' ref='timesheet_lm_report_pivot' />
            <field name = 'domain'>[('date','&gt;=',(context_today()-relativedelta(months=1)).strftime('%Y-%m-01')),('date','&lt;',time.strftime('%Y-%m-01'))]</field>
            <field name = "context">{'group_by': ['date:week']}</field>
        </record>

        <menuitem id="menu_lm_timesheet_tree"
            name="Pivot"
            sequence="2"
            parent="menu_lm_timesheet"
            action="action_lm_all_timesheet_pivot"
        />

    </data>
</odoo> 