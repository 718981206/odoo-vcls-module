<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        
        <!-- deactivate allocations menus because we don't use it for now -->
        <record id="hr_holidays.menu_open_allocation" model="ir.ui.menu">
            <field name="active" eval="False"/>
        </record>   
        
        <!-- deactivate all managers menu to reorganise them -->
        <record id="hr_holidays.menu_hr_holidays_approvals" model="ir.ui.menu">
            <field name="active" eval="False"/>
        </record>
        
        <record id="hr_holidays.hr_holidays_menu_manager_approve" model="ir.ui.menu">
            <field name="active" eval="False"/>
        </record>
        <record id="hr_holidays.menu_open_department_leave_approve" model="ir.ui.menu">
            <field name="active" eval="False"/>
        </record>
        <record id="hr_holidays.hr_holidays_menu_manager_approve_allocations" model="ir.ui.menu">
            <field name="active" eval="False"/>
        </record>
        
        <record id="hr_holidays.hr_holidays_menu_manager_all" model="ir.ui.menu">
            <field name="active" eval="False"/>
        </record>
        <record id="hr_holidays.menu_open_employee_leave" model="ir.ui.menu">
            <field name="active" eval="False"/>
        </record>
        <record id="hr_holidays.hr_holidays_menu_manager_all_allocations" model="ir.ui.menu">
            <field name="active" eval="False"/>
        </record>
        
        <record id="hr_holidays.hr_holidays_menu_manager_payroll" model="ir.ui.menu">
            <field name="active" eval="False"/>
        </record>
        <record id="hr_holidays.hr_holidays_menu_manager_payroll_to_report" model="ir.ui.menu">
            <field name="active" eval="False"/>
        </record>
        
        <!-- Rename the misleading 'New Request' in 'Calendar Overview' -->
        <record id="hr_holidays.hr_leave_menu_new_request" model="ir.ui.menu">
            <field name="name">Calendar Overview</field>
        </record>
        
        <!-- Create new menu hierarchy for leave management -->
        
        <!-- head menu -->
        <menuitem
            id="menu_leaves_management"
            name="Leaves Management"
            parent="hr_holidays.menu_hr_holidays_root"
            sequence="4"
        />
        <!-- Configure groups to access leaves management: LM and HR teams -->
        <record id="hr.menu_open_view_employee_non_active" model="ir.ui.menu">
            <field name="groups_id" eval="[(4,ref('vcls-hr.vcls_group_superuser_lvl1')),(4,ref('vcls-hr.vcls_group_HR_local')),(4,ref('vcls-hr.vcls_group_lm'))]"/>
        </record>
        
        <!-- Leaves to approve, using the existing action slightly customized -->
        <record id="hr_leave_action_action_approve_department" model="ir.actions.act_window">
            <field name="name">Leaves To Approve</field>
            <field name="res_model">hr.leave</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,kanban,form,calendar,activity</field>
            <field name="context">{
                'search_default_approve':1}
            </field>
            <field name="domain">[]</field>
        </record>
        
        <menuitem
            id="menu_leaves_to_approve"
            name="Leaves To Approve"
            parent="menu_leaves_management"
            sequence="5"
            action="hr_holidays.hr_leave_action_action_approve_department"
        />
        
        <!-- All leaves, using the existing default action -->
        <menuitem
            id="menu_all_leaves"
            name="All Leaves"
            parent="menu_leaves_management"
            sequence="10"
            action="hr_holidays.hr_leave_action_all"
        />
        
        <!-- menu for HR allocation -->
        <menuitem
            id="menu_leaves_allocation"
            name="Leaves Allocations (HR)"
            parent="menu_leaves_management"
            sequence="15"
            action="hr_holidays.hr_leave_allocation_action_all"
        />
        <!-- Configure groups to access leaves management: LM and HR teams -->
        <record id="menu_leaves_allocation" model="ir.ui.menu">
            <field name="groups_id" eval="[(4,ref('vcls-hr.vcls_group_superuser_lvl1')),(4,ref('vcls-hr.vcls_group_HR_local'))]"/>
        </record>
        
        <!-- action for bank holidays -->
        <record id="action_hr_bank_holiday" model="ir.actions.act_window">
            <field name="name">Bank Holiday</field>
            <field name="res_model">hr.bank.holiday</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_ids" eval="[(5, 0, 0),
                (0, 0, {'view_mode': 'tree', 'view_id': ref('vcls-hr.view_bank_holiday_tree_1')}),
            ]"/>
        </record>
        
        <!-- Configuration only accessible for specific groups -->
        <record id="hr_holidays.menu_hr_holidays_configuration" model="ir.ui.menu">
            <field name="groups_id" eval="[(4,ref('vcls-hr.vcls_group_superuser_lvl1')),(4,ref('vcls-hr.vcls_group_HR_local'))]"/>
        </record>
        
        <!-- menu for bank holidays -->
        <menuitem
            id="menu_bank_holidays"
            name="Bank Holiday"
            parent="hr_holidays.menu_hr_holidays_configuration"
            sequence="15"
            action="vcls-hr.action_hr_bank_holiday"
        />
        <!-- Configure groups to access leaves management: LM and HR teams -->
        <record id="menu_bank_holidays" model="ir.ui.menu">
            <field name="groups_id" eval="[(4,ref('vcls-hr.vcls_group_superuser_lvl1')),(4,ref('vcls-hr.vcls_group_HR_local'))]"/>
        </record>
        
        <!-- Add groups to the Dashboard menu -->
        <record id="hr_holidays.menu_hr_holidays_dashboard" model="ir.ui.menu">
            <field name="groups_id" eval="[(4,ref('vcls-hr.vcls_group_superuser_lvl1')),(4,ref('vcls-hr.vcls_group_HR_local')),(4,ref('vcls-hr.vcls_group_lm'))]"/>
        </record>
        
        <!-- Add groups to the Leave reporting menu -->
        <record id="hr_holidays.menu_hr_holidays_report" model="ir.ui.menu">
            <field name="groups_id" eval="[(4,ref('vcls-hr.vcls_group_superuser_lvl1')),(4,ref('vcls-hr.vcls_group_HR_local')),(4,ref('vcls-hr.vcls_group_lm'))]"/>
        </record>
        
    </data>
</odoo>