<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="purchase_order_form" model="ir.ui.view">
            <field name="name">purchase.order.form</field>
            <field name="model">purchase.order</field>
            <field name="inherit_id" ref="purchase.purchase_order_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='order_line']//field[@name='name']" position="after">
                    <field name="sale_line_id"/>
                </xpath>
            </field>
        </record>

        <record id="sale_order_template_view_tree" model="ir.ui.view">
            <field name="name">sale.order.template.tree</field>
            <field name="model">sale.order.template</field>
            <field name="priority">1</field>
            <field name="inherit_id" ref="sale_management.sale_order_template_view_tree"/>
            <field name="arch" type="xml">
                <field name="name" position="after">
                    <field name="product_category_id"/>
                </field>
            </field>
        </record>

        <!-- 
        <record id="sale_order_form" model="ir.ui.view">
        <field name="name">sale.order.form</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            
        </field>
        </record>-->

        <record id="sale.view_sale_order_calendar" model="ir.ui.view">
            <field name="name">quotation_calendar</field>
            <field name="model">sale.order</field>
            <field name="arch" type="xml">
                <calendar string="Sales Orders" date_start="expected_start_date" color="state" mode="month">
                    <field name="name"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="amount_total" widget="monetary"/>
                </calendar>
            </field>
        </record>

        <record id="view_sale_order_kanban" model="ir.ui.view">
            <field name="name">view_sale_order_kanban</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_sale_order_kanban"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='currency_id']" position="after">
                    <!-- field name = 'risk_score' />
                    ADD RISK SCORE IN VCLS-INVOICING TO RESPECT DEPENDENCIES
                    -->
                    <field name = 'tag_ids' />
                </xpath>

                <xpath expr="//t[@t-esc='record.partner_id.value']" position="replace">
                    <t t-esc="record.name.value"/>
                </xpath>

                <xpath expr="//div[@class='oe_kanban_bottom_left text-muted']" position="replace">
                    <div class="oe_kanban_bottom_left text-muted">
                        <span><t t-esc="record.partner_id.value"/> <t t-esc="record.date_order.value"/></span>
                    </div>
                </xpath>

                <xpath expr="//div[@class='o_kanban_record_top mb16']" position="after">
                    <field name="tag_ids" widget = "many2many_tags" />
                    <!-- field name="tag_ids" widget = "many2many_tags" options="{'color_field': 'color'}"/ -->
                    <!-- 
                        Code du dessus permet de coloriser les tags mais les tags avec aucune couleur associée n'apparaîtront pas dans la vue
                        Il faudra mettre le field color du tag en mandatory alors
                     -->
                    <div t-if="record.user_id.raw_value">
                        <span class="fa fa-user-circle" aria-label="Salesman" title="Salesman"/>
                        <field name="user_id" />
                    </div>
                </xpath>



            </field>
        </record>

    </data>
</odoo>